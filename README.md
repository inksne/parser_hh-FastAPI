# Parser_HH

Приложение для сбора вакансий с HH и взаимодействия с ними.

## Руководство по эксплуатации

- Создаём .env и добавляем в него все переменные, которые перечисленны в ```config.py```
- Из корня проекта стартуем команду ```docker compose up```
- Довольствуемся результатом

## Документация

### auth

Каталог с файлами для создания access и refresh токена для аутентификации.
Также содержит функции для этой самой аутентификации.

### certs

Каталог с приватным и публичным ключами, а также ssl сертификатами.

### database/database.py & alembic & alembic.ini

Подключение к psql и создание миграций. 

### database/managers.py

Классы для взаимодействия с psql.

### database/models.py

Файл с моделями.

### parse_hh

Содержит:
- parse_hh.py: файл с ручками.
- helpers.py: файл с помощниками для ручек (для создания передаваемых параметров).
- areas.json & metro.json: файл с id всех стран, регионов, городов и метро, которые допускает API HH.
- areas_index.py & metro_index.py: файл для преобразования входящих стран, регионов, городов и метро в id, который читает API HH.
- dependencies.py: файл с зависимостями для получения преобразователя areas и metro.


### templates

Каталог с базовыми html-страницами и файлом ```router.py```.
В файле идет простое подключение html-страниц.

### test_main & pytest.ini

Внутри файл с API тестами.

В pytest.ini конфигурация для *pytest*.

### api.py

Файл с ручками для создания, получения и удаления вакансий из бд.

### basemodels.py

Файл с Pydantic Basemodel, которые используются для типизации приходящих и отправляемых данных

### config.py

В файле идет получение переменных окружения, настройка JWT, psql и логирования

### exceptions.py

Файл с HTTPException'ами для обработки ошибок.

### main.py

Основной файл с созданием приложения, корсами и подключением роутеров.


### mypy_validate.py

Файл со скриптом для mypy, который прогоняет его по всем указанным файлапм.

## CI/CD

В пайплайне я добавил всего лишь две джобы: *build* и *test*.
Да, джобы по типу deploy нет, т.к у [render](https://render.com/) CI/CD уже настроено,
но на всякий случай закомментил джобу deploy.

## Примечание

Можете распространять код, делать с ним что угодно, если будут вопросы, то вот почта:
```inksne@gmail.com```